<div style='width:100%; height: 100%;' class='container'>
  <form nz-form [formGroup]="validateForm" class="registry-form" (ngSubmit)="submitForm()" style="min-width: 400px; max-width: 600px;">
    <nz-form-item>
      <nz-form-control>
        <nz-input-group [nzPrefix]="prefixUser">
          <input type="text" nz-input formControlName="username" placeholder="请输入账户" [(ngModel)]='account.username'>
        </nz-input-group>
        <nz-form-explain *ngIf="validateForm.get('username').dirty && validateForm.get('username').errors">请输入注册的账户，账户为4-20位的字符</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control>
        <nz-input-group [nzPrefix]="prefixLock">
          <input type="password" nz-input formControlName="password" placeholder="请输入密码" [(ngModel)]='account.password'>
        </nz-input-group>
        <nz-form-explain *ngIf="validateForm.get('password').dirty && validateForm.get('password').errors">请输入密码，密码为4-20位的字符</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    
    <nz-form-item>
      <nz-form-control>
        <nz-input-group [nzPrefix]="prefixLock">
          <input type="password" nz-input formControlName="passwordValidate" placeholder="请再次输入密码">
        </nz-input-group>
        <nz-form-explain *ngIf="validateForm.get('passwordValidate').dirty && validateForm.get('passwordValidate').errors">请再次输入密码</nz-form-explain>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <nz-input-group >
          <input type="text" nz-input   formControlName="phonenumber" placeholder="请再次输入手机号" [(ngModel)]='account.phonenumber'>
        </nz-input-group>
        <nz-form-explain *ngIf="validateForm.get('phonenumber').dirty && validateForm.get('phonenumber').errors">请再次输入正确的手机号</nz-form-explain>
      </nz-form-control>
    </nz-form-item>

    <!--弹窗-->
    <ng-template #tplTitle>
      <span>验证码</span>
    </ng-template>
    <ng-template #tplContent>
      <p>请输入收到的验证码信息</p>
      <nz-input-group  >
        <input type="text" nz-input   formControlName="captureCode" placeholder="请再次输入收到的验证码" [(ngModel)]='captureCode'>
      </nz-input-group>
    </ng-template>
    <ng-template #tplFooter>
      <button nz-button nzType="primary" (click)="validateCaptureCode()" [nzLoading]="tplModalButtonLoading">确定</button>
      <button nz-button nzType="primary" (click)="destroyTplModal()" [nzLoading]="tplModalButtonLoading">取消</button>
    </ng-template>
    <!--弹窗-->

    <nz-form-item>
      <nz-form-control>
        <button nz-button [nzLoading]='isSending' class="registry-form-button" (click)="sendCaptureCode()" [nzType]="'primary'">发送验证码</button>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <label nz-checkbox formControlName="isLogin">
          <span>注册后是否立即登录</span>
        </label>
      </nz-form-control>
    </nz-form-item>
    
    <nz-form-item>
      <nz-form-control [nzSpan]="12" style='display:flex; justify-content: center;' >
          <button [disabled]='validateForm.invalid || validateForm.errors' nz-button class="registry-form-button" [nzType]="'primary'" (click)='saveOrUpdate()'>注册</button>
        </nz-form-control>
      <nz-form-control [nzSpan]="12" style='display:flex; justify-content: center;' >
          <button nz-button class="registry-form-button" [nzType]="'primary'" routerLink='/welcome'>返回</button>
      </nz-form-control>
    </nz-form-item>


    <nz-form-item>
      <nz-form-control>
        <nz-input-group >
          <input type="hidden" nz-input   formControlName="isPassCaptureCode" placeholder="验证验证码" [(ngModel)]='isPassCaptureCode'>
        </nz-input-group>
      </nz-form-control>
    </nz-form-item>
  </form>
  <ng-template #prefixUser><i nz-icon type="user"></i></ng-template>
  <ng-template #prefixLock><i nz-icon type="lock"></i></ng-template>
</div>